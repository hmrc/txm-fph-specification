---
title: Header requirements
weight: 3
description: Page description for search engines
---

# Header requirements

<span class="font-large">[Message about selecting your connection method.]</span>

## All headers

All headers must use the US-ASCII character set US-ASCII, with other characters percent encoded as in RFC3986 (opens in a new tab).

[Additional general formatting messages.]

## Definitions and examples

<p><span class="code--slim-large">Gov-Client-Connection-Method</span><br>

A string representing the connection method used for the request. [Add message and link to selecting your connection method.]

####Example
<pre class="code--block">Gov-Client-Connection-Method: DESKTOP_APP_VIA_SERVER</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Public-IP</span><br>

The public IP address (IPv4 or IPv6) from which the originating device makes the request.

When the connection between client and server is over a private network, you will not be able to collect a public IP address, so submit this header with an empty value or omit it entirely.

####Examples
<pre class="code--block">Gov-Client-Public-IP: 198.51.100.0</pre>
<pre class="code--block">Gov-Client-Public-IP: ABCD:EF01:2345:6789:ABCD:EF01:2345:6789</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Public-Port</span><br>

The public TCP port that the originating device uses when initiating the request.

This must not be a server port, such as 443 for an https connection.

When the connection between client and server is over a private network, you will not be able to collect a public port, so submit this header with an empty value or omit it entirely.

####Example
<pre class="code--block">Gov-Client-Public-Port: 12345</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Device-ID</span><br>

An identifier unique to an originating device. This should be generated by an application and persistently stored on the device. The identifier should not expire.

You can:

- generate the device ID with a universally unique identifier (UUID) also known as a globally unique identifier (GUID) as shown in the example
- store the device ID in a hidden file, the Windows registry, or in a cookie
If your end user deletes the device ID, we will not hold you responsible.

Note that the device ID will not be unique enough if you derive it from system or hardware properties such as disk serial number, MAC address, or network name.

####Example
<pre class="code--block">Gov-Client-Device-ID: beec798b-b366-47fa-b1f8-92cede14a1ce</pre>

<br>
<p><span class="code--slim-large">Gov-Client-User-IDs</span><br>

A key-value data structure containing the user identifiers. The keys should indicate accounts the user holds.

The os field should contain the identifier of the user signed in on the originating device. Additional fields should contain the user’s identifiers with the vendor services involved in the request.

Each key and value must be percent encoded but not the separators (equal signs, ampersands) themselves.

####Examples
In DESKTOP_APP_VIA_SERVER connection method, when there is a single vendor service involved in handling the request:

<pre class="code--block">Gov-Client-User-IDs: os=domain%5Calice&my-vendor-online-account=alice_online_account_user_id_with_vendor</pre>

For example, in DESKTOP_APP_VIA_SERVER connection method, when the request passes through two vendor services:

<pre class="code--block">Gov-Client-User-IDs: os=domain%5Calice&my-vendor=alice_online_account_user_id_with_vendor&my-secondary-vendor=alice_online_account_user_id_with_secondary_vendor</pre>

For example, in DESKTOP_APP_DIRECT, where there are no vendor accounts involved, or BATCH_PROCESS_DIRECT where there are no user devices involved and the originating device is the batch server:

<pre class="code--block">Gov-Client-User-IDs: os=user123</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Timezone</span><br>

The local timezone of the originating device, expressed as UTC±<hh>:<mm>.

####Examples
<pre class="code--block">Gov-Client-Timezone: UTC+00:00</pre>
<pre class="code--block">Gov-Client-Timezone: UTC+01:00</pre>
<pre class="code--block">Gov-Client-Timezone: UTC-01:15</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Local-IPs</span><br>

A list of all local IP addresses (IPv4 and IPv6) available to the originating device.

For web applications you can use WebRTC to discover local device IPs.

Each value in the list must be percent encoded, but commas used as separators must not be percent encoded.

####Examples
<pre class="code--block">Gov-Client-Local-IPs: fc00%3A%3A,10.1.2.3</pre>
<pre class="code--block">Gov-Client-Local-IPs: 10.1.2.3,10.3.4.2</pre>

<br>
<p><span class="code--slim-large">Gov-Client-MAC-Addresses</span><br>

The list of MAC addresses available on the originating device.

Each value in the list must be percent encoded, but commas used as separators must not be percent encoded.

####Example
<pre class="code--block">Gov-Client-MAC-Addresses: ea%3A43%3A1a%3A5d%3A21%3A45,10%3A12%3Acc%3Afa%3Aaa%3A32</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Screens</span><br>

Information related to the originating device’s screens. The fields include:

<span class="code--slim">width</span> is the reported width of the screen, in pixels

<span class="code--slim">height</span>  is the reported height of the screen, in pixels

<span class="code--slim">scaling-factor</span>  is the reported scaling factor of the screen. For instance, high pixel density screens might have a scaling factor of 2, whereas standard definition screens might report a scaling factor of 1.

<span class="code--slim">colour-depth</span> is the colour depth of the screen, in bits.

####Example
<pre class="code--block">Gov-Client-Screens: width=1920&height=1080&scaling-factor=1&colour-depth=16,width=3000&height=2000&scaling-factor=1.25&colour-depth=16</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Window-Size</span><br>

The number of pixels of the window on the originating device in which the user initiated (directly or indirectly) the API call to HMRC.

Should be displayed as a key-value data structure with width and height fields.

####Example
<pre class="code--block">Gov-Client-Window-Size: width=1256&height=803</pre>

<br>
<p><span class="code--slim-large">Gov-Client-User-Agent</span><br>

An attempt to identify the operating system family, version, device manufacturer and model of the originating device.

Reported in the format:

<span class="code--slim">OS Family/OS Version+ (Device Manufacturer/Device Model+)</span>

If you cannot detect the exact version due to operating system constraints, but can detect several options, list all options.

Each value (OS Family, OS Version, Device Manufacturer and Device Model) must be percent encoded but not the separators themselves. The separators are forward slashes, spaces, opening round bracket, closing round bracket.

####Examples
<pre class="code--block">Gov-Client-User-Agent: Windows/Server%202012 (Dell%20Inc./OptiPlex%20980)</pre>
<pre class="code--block">Gov-Client-User-Agent: Windows/XP Windows/NT (Dell/XPS15 Dell/XPS13)</pre>

If you cannot discover any information due to operating system constraints, leave the appropriate field blank as shown in the following examples:

<pre class="code--block">Gov-Client-User-Agent: Windows/ (Dell/XPS15)</pre>
<pre class="code--block">Gov-Client-User-Agent: / (Dell/XPS15)</pre>
<pre class="code--block">Gov-Client-User-Agent: Windows/XP (/)</pre>
<pre class="code--block">Gov-Client-User-Agent: Windows/XP (/XPS15)</pre>
<pre class="code--block">Gov-Client-User-Agent: Windows/XP Windows/98 (/)</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Browser-Plugins</span><br>

A list of browser plugins on the originating device.

Each value in the list must be percent encoded, but commas used as separators must not be percent encoded.

####Example
<pre class="code--block">Gov-Client-Browser-Plugins: Shockwave%20Flash,Chromium%20PDF%20Viewer</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Browser-JS-User-Agent

JavaScript-reported user agent string from the originating device.

####Example
<pre class="code--block">Gov-Client-Browser-JS-User-Agent: Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us) AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Browser-Do-Not-Track</span><br>

Whether the Do Not Track option is enabled on the browser.

It should be <span class="code--slim">true</span> if this option is enabled, <span class="code--slim">false</span> if it’s not.

####Example
<pre class="code--block">Gov-Client-Browser-Do-Not-Track: false</pre>

<br>
<p><span class="code--slim-large">Gov-Client-Multi-Factor</span><br>

A list of key-value data structures containing details of the multi-factor authentication (MFA) statuses related to the API call. For each key-value data structure, the applicable fields are:

<span class="code--slim">type</span> is a tag describing the MFA method being used. The possible values are:

<span class="code--slim">TOTP</span> - The MFA was performed by accepting a time-based one-time password code

<span class="code--slim">AUTH_CODE</span> - The MFA was performed by sending an authorisation code to the user in some out-of-band channel, for example, by email or by SMS

<span class="code--slim">OTHER</span> - A different MFA method was used than the available values

<span class="code--slim">timestamp</span> is a UTC timestamp in the format <span class="code--slim">yyyy-MM-ddThh:mmZ</span> recording the time of the last successful prompt for this factor.

unique-reference identifies a single factor. For example, a salted-and-hashed phone number used for SMS or an identifier linked to a TOTP secret – but not the secret itself. The intention is to recognise the same factor being used across API calls.

If only a single factor (for example, username and password) is being used, submit the header with an empty value or omit it entirely.

Each key and value must be percent encoded but not the separators (equal signs, ampersands, commas) themselves.

####Example
<pre class="code--block">Gov-Client-Multi-Factor: type=AUTH_CODE&timestamp=2017-04-21T13%3A23Z&unique-reference=c672b8d1ef56ed28,type=TOTP&timestamp=2017-05-19T13%3A10Z&unique-reference=ac73430ffdfd9</pre>

<br>
<p><span class="code--slim-large">Gov-Vendor-Version</span><br>

A key-value data structure of software versions involved in handling a request:

<span class="code--slim"><software-name>=<version-number>&<software-name-2>=<version-number-2>& …</span>

Each key and value must be percent encoded but not the separators (equal signs, ampersands) themselves.

####Example
For DESKTOP_APP_DIRECT the header may be:

<pre class="code--block">Gov-Vendor-Version: My%20Desktop%20Software=1.2.3.build4286</pre>

For MOBILE_APP_VIA_SERVER, the header may be:

<pre class="code--block">Gov-Vendor-Version: my-frontend-app=2.2.2&my-serverside-code=v3.8</pre>

<br>
<p><span class="code--slim-large">Gov-Vendor-License-IDs</span><br>

A key-value data structure of hashed license keys relating to the vendor software initiating the API request on the originating device.

<software-name>=<hashed-license-value>&<software-name-2>=<hashed-license-value-2>& …
If there are no such licenses on the originating device, then submit the header with an empty value or omit it entirely.

Each key and value must be percent encoded but not the separators (equal signs, ampersands) themselves.

In order to obtain consistency amongst the values provided, please maintain the use of the same hashing function.

####Example
<pre class="code--block">Gov-Vendor-License-IDs: my%20licensed%20software=8D7963490527D33716835EE7C195516D5E562E03B224E9B359836466EE40CDE1</pre>

<br>
<p><span class="code--slim-large">Gov-Vendor-Public-IP</span><br>

The public IP address of the servers to which the originating device sent their requests. This might be an IP address of a Web Application Firewall, a DDoS Protection Service, or a load balancer that the vendor's DNS record resolves to.

When the connection between client and server is over a private network, you will not be able to collect a public IP address, so submit this header with an empty value or omit it entirely.

####Example
<pre class="code--block">Gov-Vendor-Public-IP: 203.0.113.6</pre>

<br>
<p><span class="code--slim-large">Gov-Vendor-Forwarded</span><br>

A list that details hops over the internet between services that terminate TLS.

For each hop over the internet, a key-value data structure with a by and for field must be appended to the list.

The by field must be the server’s public IP address where it received the request.

The for field must be the requestor’s public IP address from which the vendor received the request.

Each key and value must be percent encoded but not the separators (equal signs, ampersands, commas) themselves.

Do not include hops within a private network.

####Examples


If a request is first received by a web application firewall (WAF) service on <span class="code--slim">2001:0db8:85a3:0000:0000:8a2e:0370:7334</span>. The WAF sees the request coming from <span class="code--slim">57.4.28.41</span>. Subsequently, the WAF passes the request on to the vendor servers via HTTPS over the internet.

If the request is received by the server of vendor A on <span class="code--slim">188.87.76.95</span>, from the WAF-owned IP address <span class="code--slim">209.210.136.84<span>.

If the services of vendor A issue a HTTP request as a result of the previous step to the services of vendor B on <span class="code--slim">176.30.57.118</span>, from vendor A owned IP <span class="code--slim">150.94.192.63</span> then you should generate the following header:

<pre class="code--block">Gov-Vendor-Forwarded: by=2001%3A0db8%3A85a3%3A0000%3A0000%3A8a2e%3A0370%3A7334&for=57.4.28.41,by=188.87.76.95&for=209.210.136.84,by=176.30.57.118&for=150.94.192.63M</pre>
